#define MAX3(a,b,c) ((((a) > (b)) ? (a) : (b)) > (c) ? (((a) > (b)) ? (a) : (b)) : c)
#define MIN3(a,b,c) ((((a) < (b)) ? (a) : (b)) < (c) ? (((a) > (b)) ? (a) : (b)) : c)